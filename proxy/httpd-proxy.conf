SSLProxyEngine On

<VirtualHost *:80>
    ServerName localhost

    ProxyPreserveHost On
    ProxyRequests Off
    ProxyTimeout 300
    
    # Headers
    Header set Access-Control-Allow-Origin "*"
    Header set X-Forwarded-Proto "https"
    Header set X-Forwarded-Host "%{HTTP_HOST}e"

    # --- API → Spring Boot Backend ---
    ProxyPass        "/api" "https://stranger-app-po8w.onrender.com/api" timeout=300
    ProxyPassReverse "/api" "https://stranger-app-po8w.onrender.com/api"

    # --- Todo lo demás → PHP Frontend ---
    ProxyPass        "/" "https://stranger-app-1.onrender.com/" timeout=300
    ProxyPassReverse "/" "https://stranger-app-1.onrender.com/"

    # Logs para debugging
    ErrorLog /proc/self/fd/2
    CustomLog /proc/self/fd/1 combined
</VirtualHost>